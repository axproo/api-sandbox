name: Deploy Backend (cPanel FTP)

on:
    push:
        branches: ["main"]

jobs:
    deploy:
        runs-on: debian-latest

        steps:
            - name: Checkout repository
              uses: actions/checkout@v3

            - name: Install dependencies
              uses: SamKirkland/FTP-Deploy-Action@v4.3.4

            - name: Deploy to cPanel via FTP
              uses: SamKirkland/FTP-Deploy-Action@v4.3.4
              with:
                server: ${{ secrets.FTP_SERVER }}
                username: ${{ secrets.FTP_USERNAME }}
                password: ${{ secrets.FTP_PASSWORD }}
                port: ${{secrets.FTP_PORT}}
                local-dir: ./   # dossiers à uploader (backend)
                server-dir: /public_html/api/   # répertoire cible sur ton cPanel